# Документация файла port_clearer.bat

## Общее описание
Файл `port_clearer.bat` - это скрипт для Windows, который освобождает указанный порт, завершая процесс, который его занимает. В данном случае скрипт настроен на освобождение порта 5432, используемого PostgreSQL.

## Структура скрипта

### Начало скрипта
```batch
@echo off
setlocal
```
- `@echo off` - отключает вывод команд в консоль
- `setlocal` - создает локальную область для переменных

### Определение порта
```batch
set PORT=5432
```
- Устанавливает переменную `PORT` со значением 5432
- Это порт, который нужно освободить

### Поиск процесса
```batch
echo Поиск процесса, занимающего порт %PORT%...
for /f "tokens=5" %%a in ('netstat -ano ^| findstr :%PORT%') do (
    set PID=%%a
)
```
- Выводит сообщение о начале поиска
- Использует команду `netstat` для получения списка активных соединений
- `findstr` ищет строки, содержащие указанный порт
- Извлекает PID (идентификатор процесса) из вывода
- Сохраняет PID в переменную

### Проверка и завершение процесса
```batch
if defined PID (
    echo Найден процесс с PID=%PID%, занимающий порт %PORT%.
    echo Завершение процесса...
    taskkill /PID %PID% /F
    if %ERRORLEVEL% equ 0 (
        echo Порт %PORT% успешно освобожден.
    ) else (
        echo Не удалось завершить процесс. Ошибка: %ERRORLEVEL%
    )
) else (
    echo Порт %PORT% не занят.
)
```
- Проверяет, был ли найден PID
- Если PID найден:
  - Выводит информацию о найденном процессе
  - Пытается завершить процесс с помощью `taskkill`
  - Проверяет успешность завершения
  - Выводит соответствующее сообщение
- Если PID не найден:
  - Выводит сообщение о том, что порт свободен

### Завершение скрипта
```batch
endlocal
```
- Завершает локальную область переменных
- Очищает все локальные переменные

## Использование
1. Скрипт может быть запущен напрямую или вызван из другого скрипта
2. При запуске он автоматически:
   - Проверяет занятость порта 5432
   - Завершает процесс, если порт занят
   - Выводит информацию о результатах

## Примечания
- Скрипт требует прав администратора для завершения некоторых процессов
- Используется для подготовки окружения перед запуском PostgreSQL
- Может быть модифицирован для работы с другими портами
- Безопасно завершает процессы, занимающие порт 